<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absolute Studios | HUB</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #e9ecef; }

        .container {
            position: relative; width: 900px; height: 600px; background: #fff;
            border-radius: 30px; box-shadow: 0 0 40px rgba(0,0,0,0.15); overflow: hidden;
        }

        .form-box {
            position: absolute; top: 0; width: 50%; height: 100%; display: flex;
            flex-direction: column; justify-content: center; padding: 40px; transition: .6s ease-in-out;
        }

        /* Sol Taraf (Başvuru Sorgula ve Duyurular) */
        .form-box.login { left: 0; }
        .container.active .form-box.login { left: -50%; }

        /* Sağ Taraf (Başvuru Yap) */
        .form-box.register { left: 100%; }
        .container.active .form-box.register { left: 50%; }

        h1 { font-size: 24px; text-align: center; margin-bottom: 15px; color: #333; }
        .duyuru-box { background: #f8f9fa; padding: 10px; border-radius: 10px; font-size: 13px; border-left: 4px solid #7d2ae8; margin-bottom: 20px; color: #555; }

        .input-box { position: relative; width: 100%; height: 45px; margin: 15px 0; }
        .input-box input, .input-box select, .input-box textarea {
            width: 100%; height: 100%; background: #f0f2f5; border: none; outline: none;
            border-radius: 10px; padding: 0 45px 0 15px; font-size: 14px;
        }
        .input-box i { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #7d2ae8; }

        .btn {
            width: 100%; height: 45px; background: #7d2ae8; border: none; border-radius: 10px;
            color: #fff; font-weight: 600; cursor: pointer; transition: .3s; margin-top: 10px;
        }
        .btn:hover { background: #6610f2; transform: translateY(-2px); }

        /* Kayan Panel Tasarımı */
        .toggle-box { position: absolute; top: 0; left: 50%; width: 50%; height: 100%; transition: .6s ease-in-out; }
        .container.active .toggle-box { left: 0; }
        .toggle-panel {
            position: absolute; width: 100%; height: 100%; background: #7d2ae8;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: #fff; transition: .6s ease-in-out; text-align: center;
        }
        .toggle-left { right: 0; transform: translateX(0); border-radius: 0 150px 150px 0; }
        .container.active .toggle-left { transform: translateX(-100%); border-radius: 0; }
        .toggle-right { left: 100%; transform: translateX(0); border-radius: 150px 0 0 150px; }
        .container.active .toggle-right { transform: translateX(-100%); border-radius: 0; }

        .toggle-btn { width: 160px; height: 45px; background: transparent; border: 2px solid #fff; border-radius: 10px; color: #fff; cursor: pointer; margin-top: 20px; }

        /* Admin Ekranı */
        #admin-screen { display: none; padding: 30px; height: 100%; overflow-y: auto; }
        .admin-card { border: 1px solid #eee; padding: 15px; border-radius: 15px; margin-bottom: 10px; position: relative; }
        .badge { position: absolute; top: 10px; right: 10px; padding: 3px 8px; border-radius: 5px; font-size: 10px; color: white; }
    </style>
</head>
<body>

    <div class="container" id="mainContainer">
        
        <div class="form-box login">
            <h1>Stüdyo Haberleri</h1>
            <div id="announcement" class="duyuru-box">Yükleniyor...</div>
            
            <h1 style="margin-top: 20px;">Başvuru Durumu</h1>
            <p style="font-size: 12px; color: #666; text-align: center;">E-postan ile sonucunu kontrol et.</p>
            <div class="input-box">
                <input type="email" id="checkEmail" placeholder="E-posta adresin">
                <i class='bx bx-search'></i>
            </div>
            <button class="btn" onclick="checkStatus()">Sorgula</button>
            <p id="statusResult" style="margin-top: 15px; font-weight: bold; text-align: center; font-size: 14px;"></p>
        </div>

        <div class="form-box register">
            <h1>Ekibe Katıl</h1>
            <div class="input-box"><input type="text" id="regName" placeholder="Ad Soyad"><i class='bx bxs-user'></i></div>
            <div class="input-box"><input type="email" id="regEmail" placeholder="E-posta"><i class='bx bxs-envelope'></i></div>
            <div class="input-box">
                <select id="regRole"><option value="Yazılım">Yazılım</option><option value="Tasarım">Tasarım</option><option value="Ses">Ses/Müzik</option></select>
            </div>
            <div class="input-box" style="height: 60px;"><textarea id="regMsg" placeholder="Neden biz?" style="padding-top:10px;"></textarea></div>
            <button class="btn" onclick="sendApp()">Başvuruyu Tamamla</button>
        </div>

        <div class="toggle-box">
            <div class="toggle-panel toggle-left">
                <h1>Absolute Studios</h1>
                <p>Yeni bir başvuru mu yapacaksın?</p>
                <button class="toggle-btn" id="toRegister">Başvuru Formu</button>
                <p style="margin-top: 40px; font-size: 10px; opacity: 0.6;" onclick="adminLoginPrompt()">YÖNETİCİ GİRİŞİ</p>
            </div>
            <div class="toggle-panel toggle-right">
                <h1>Hoş Geldin!</h1>
                <p>Başvuru durumunu görmek ve haberleri okumak için tıkla.</p>
                <button class="toggle-btn" id="toLogin">Durum Sorgula</button>
            </div>
        </div>

        <div id="admin-screen">
            <h1>Yönetim Paneli</h1>
            <div class="input-box"><input type="text" id="newAnnounce" placeholder="Yeni Duyuru Yaz..."><button class="btn" onclick="updateAnnounce()" style="height: 35px; width: 100px;">Yayınla</button></div>
            <div id="admin-list"></div>
            <button class="btn" style="background: #333;" onclick="location.reload()">Çıkış</button>
        </div>

    </div>

    <script>
        (function(){ emailjs.init("woztt-c1zUwx7MrFT"); })();

        const container = document.getElementById('mainContainer');
        const toRegister = document.getElementById('toRegister');
        const toLogin = document.getElementById('toLogin');

        // Veriler
        let apps = JSON.parse(localStorage.getItem('absoluteApps')) || [];
        let archived = JSON.parse(localStorage.getItem('absoluteArchive')) || []; // Sonuçlananlar
        let announcement = localStorage.getItem('absoluteNews') || "Absolute Studios'a hoş geldiniz! Henüz yeni bir duyuru yok.";

        document.getElementById('announcement').innerText = announcement;

        toRegister.onclick = () => container.classList.add('active');
        toLogin.onclick = () => container.classList.remove('active');

        // Admin Giriş (Gizli tık ile açılır)
        function adminLoginPrompt() {
            let u = prompt("Admin Kullanıcı:");
            let p = prompt("Admin Şifre:");
            if(u === 'qlolw' && p === 'qlolw') {
                document.querySelectorAll('.form-box, .toggle-box').forEach(el => el.style.display = 'none');
                document.getElementById('admin-screen').style.display = 'block';
                renderAdmin();
            }
        }

        // Başvuru Gönder
        function sendApp() {
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const role = document.getElementById('regRole').value;
            const msg = document.getElementById('regMsg').value;

            if(!name || !email || !msg) return alert("Eksik bilgi!");
            apps.push({ name, email, role, msg, status: 'BEKLEMEDE' });
            localStorage.setItem('absoluteApps', JSON.stringify(apps));
            alert("Başvuru alındı! Durum Sorgula kısmından takip edebilirsin.");
            location.reload();
        }

        // Durum Sorgula
        function checkStatus() {
            const email = document.getElementById('checkEmail').value;
            const resultDisplay = document.getElementById('statusResult');
            
            let found = apps.find(a => a.email === email) || archived.find(a => a.email === email);

            if(found) {
                resultDisplay.innerText = `DURUM: ${found.status}`;
                resultDisplay.style.color = found.status === 'ONAYLANDI' ? 'green' : (found.status === 'REDDEDİLDİ' ? 'red' : 'orange');
            } else {
                resultDisplay.innerText = "Başvuru bulunamadı.";
                resultDisplay.style.color = "black";
            }
        }

        function updateAnnounce() {
            const txt = document.getElementById('newAnnounce').value;
            localStorage.setItem('absoluteNews', txt);
            alert("Duyuru güncellendi!");
            location.reload();
        }

        function renderAdmin() {
            const list = document.getElementById('admin-list');
            list.innerHTML = apps.length === 0 ? "Bekleyen başvuru yok." : "";
            apps.forEach((app, i) => {
                list.innerHTML += `
                    <div class="admin-card">
                        <strong>${app.name}</strong> - ${app.role}<br>${app.msg}
                        <div style="margin-top:10px;">
                            <button onclick="handleApp(${i}, 'ONAYLANDI')" style="color:green; cursor:pointer;">Onayla</button>
                            <button onclick="handleApp(${i}, 'REDDEDİLDİ')" style="color:red; margin-left:15px; cursor:pointer;">Reddet</button>
                        </div>
                    </div>`;
            });
        }

        function handleApp(index, stat) {
            let app = apps[index];
            app.status = stat;
            
            // Mail gönder
            emailjs.send('service_z6q6ij7', 'template_x6898bt', {
                to_email: app.email, user_name: app.name, status: stat, from_name: "Absolute Studios"
            });

            archived.push(app);
            apps.splice(index, 1);
            localStorage.setItem('absoluteApps', JSON.stringify(apps));
            localStorage.setItem('absoluteArchive', JSON.stringify(archived));
            alert("İşlem tamam, mail gönderildi.");
            renderAdmin();
        }
    </script>
</body>
</html>
